diff -rupN ../srtp_old/crypto/cipher/aes_icm.c ./crypto/cipher/aes_icm.c
--- ../srtp_old/crypto/cipher/aes_icm.c	2011-09-06 10:09:18.000000000 +0200
+++ ./crypto/cipher/aes_icm.c	2011-09-06 10:19:16.000000000 +0200
@@ -281,7 +281,7 @@ aes_icm_set_iv(aes_icm_ctx_t *c, void *i
  * this is an internal, hopefully inlined function
  */
   
-inline void
+static void
 aes_icm_advance_ismacryp(aes_icm_ctx_t *c, uint8_t forIsmacryp) {
   /* fill buffer with new keystream */
   v128_copy(&c->keystream_buffer, &c->counter);
diff -rupN ../srtp_old/srtp.patch ./srtp.patch
--- ../srtp_old/srtp.patch	2011-09-06 10:14:26.000000000 +0200
+++ ./srtp.patch	2011-09-06 10:21:47.000000000 +0200
@@ -1,50 +1,12 @@
-diff -rupN ../srtp_old/crypto/cipher/aes.c ./crypto/cipher/aes.c
---- ../srtp_old/crypto/cipher/aes.c	2011-09-06 10:09:18.000000000 +0200
-+++ ./crypto/cipher/aes.c	2011-09-06 10:05:35.000000000 +0200
-@@ -1358,7 +1358,7 @@ static uint32_t U4[256] = {
- 
- extern debug_module_t mod_aes_icm;
- 
+diff -rupN ../srtp_old/crypto/cipher/aes_icm.c ./crypto/cipher/aes_icm.c
+--- ../srtp_old/crypto/cipher/aes_icm.c	2011-09-06 10:09:18.000000000 +0200
++++ ./crypto/cipher/aes_icm.c	2011-09-06 10:19:16.000000000 +0200
+@@ -281,7 +281,7 @@ aes_icm_set_iv(aes_icm_ctx_t *c, void *i
+  * this is an internal, hopefully inlined function
+  */
+   
 -inline void
-+void
- aes_expand_encryption_key(const v128_t *key, 
- 			  aes_expanded_key_t expanded_key) {
-   int i;
-@@ -1411,7 +1411,7 @@ aes_expand_encryption_key(const v128_t *
-   }
- }
- 
--inline void
-+void
- aes_expand_decryption_key(const v128_t *key, 
- 			  aes_expanded_key_t expanded_key) {
-   int i;
-diff -rupN ../srtp_old/crypto/include/aes.h ./crypto/include/aes.h
---- ../srtp_old/crypto/include/aes.h	2011-09-06 10:09:18.000000000 +0200
-+++ ./crypto/include/aes.h	2011-09-06 10:03:53.000000000 +0200
-@@ -55,11 +55,11 @@
- 
- typedef v128_t aes_expanded_key_t[11];
- 
--inline void
-+void
- aes_expand_encryption_key(const v128_t *key,
- 			  aes_expanded_key_t expanded_key);
- 
--inline void
-+void
- aes_expand_decryption_key(const v128_t *key,
- 			  aes_expanded_key_t expanded_key);
- 
-diff -rupN ../srtp_old/crypto/math/datatypes.c ./crypto/math/datatypes.c
---- ../srtp_old/crypto/math/datatypes.c	2011-09-06 10:09:18.000000000 +0200
-+++ ./crypto/math/datatypes.c	2011-09-06 10:02:55.000000000 +0200
-@@ -124,7 +124,7 @@ octet_string_hex_string(const void *s, i
-   return bit_string;
- }
- 
--inline int
-+static int
- hex_char_to_nibble(uint8_t c) {
-   switch(c) {
-   case ('0'): return 0x0;
++static void
+ aes_icm_advance_ismacryp(aes_icm_ctx_t *c, uint8_t forIsmacryp) {
+   /* fill buffer with new keystream */
+   v128_copy(&c->keystream_buffer, &c->counter);
